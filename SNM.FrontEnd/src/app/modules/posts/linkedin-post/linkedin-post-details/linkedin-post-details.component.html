<!-- Card #59 - Expandable card -->
<fuse-card class="flex flex-col max-w-160 m-0 w-full filter-post filter-interactive" #expandableCard02="fuseCard">

    <!-- Header -->
    <div class="flex flex-0 items-center h-18 px-4 border-b bg-gray-50 dark:bg-transparent">

        <button mat-icon-button (click)="drawer.close()">
            <mat-icon [svgIcon]="'heroicons_outline:x'"></mat-icon>
        </button>
        <div class="ml-2 text-lg font-medium">Post Details</div>
        <button class="ml-auto " mat-icon-button [matMenuTriggerFor]="postCardMenu02">
            <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:dots-vertical'"></mat-icon>
        </button>
        <mat-menu #postCardMenu02="matMenu">
            <button mat-menu-item>
                <span class="flex items-center">
                    <mat-icon class="icon-size-5 mr-3" [svgIcon]="'heroicons_solid:save'"></mat-icon>
                    <span>Save post</span>
                </span>
            </button>
            <button mat-menu-item>
                <span class="flex items-center">
                    <mat-icon class="icon-size-5 mr-3" [svgIcon]="'heroicons_solid:eye-off'"></mat-icon>
                    <span>Hide post</span>
                </span>
            </button>
            <button mat-menu-item>
                <span class="flex items-center">
                    <mat-icon class="icon-size-5 mr-3" [svgIcon]="'heroicons_solid:clock'"></mat-icon>
                    <span>Snooze for 30 days</span>
                </span>
            </button>
            <button mat-menu-item>
                <span class="flex items-center">
                    <mat-icon class="icon-size-5 mr-3" [svgIcon]="'heroicons_solid:minus-circle'"></mat-icon>
                    <span>Hide all</span>
                </span>
            </button>
            <mat-divider class="my-2"></mat-divider>
            <button mat-menu-item>
                <span class="flex items-center">
                    <mat-icon class="icon-size-5 mr-3" [svgIcon]="'heroicons_solid:exclamation'"></mat-icon>
                    <span>Report post</span>
                </span>
            </button>
            <button mat-menu-item>
                <span class="flex items-center">
                    <mat-icon class="icon-size-5 mr-3" [svgIcon]="'heroicons_solid:bell'"></mat-icon>
                    <span>Turn on notifications for this post</span>
                </span>
            </button>
        </mat-menu>
    </div>
    <div class="flex items-center mx-6 sm:mx-8 mt-6 mb-4">

        <img class="w-10 h-10 rounded-full mr-4" src="assets/images/avatars/female-01.jpg" alt="Card cover image">
        <div class="flex flex-col">
            <span class="font-semibold leading-none">{{linkedInPost?.author_username}}</span>
            <span class="text-sm text-secondary leading-none mt-1">{{linkedInPost?.createdAt|date:'short'}}</span>
        </div>
        <!-- <button class="ml-auto -mr-4" mat-icon-button [matMenuTriggerFor]="postCardMenu02">
            <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:dots-vertical'"></mat-icon>
        </button>
        <mat-menu #postCardMenu02="matMenu">
            <button mat-menu-item>
                <span class="flex items-center">
                    <mat-icon class="icon-size-5 mr-3" [svgIcon]="'heroicons_solid:save'"></mat-icon>
                    <span>Save post</span>
                </span>
            </button>
            <button mat-menu-item>
                <span class="flex items-center">
                    <mat-icon class="icon-size-5 mr-3" [svgIcon]="'heroicons_solid:eye-off'"></mat-icon>
                    <span>Hide post</span>
                </span>
            </button>
            <button mat-menu-item>
                <span class="flex items-center">
                    <mat-icon class="icon-size-5 mr-3" [svgIcon]="'heroicons_solid:clock'"></mat-icon>
                    <span>Snooze for 30 days</span>
                </span>
            </button>
            <button mat-menu-item>
                <span class="flex items-center">
                    <mat-icon class="icon-size-5 mr-3" [svgIcon]="'heroicons_solid:minus-circle'"></mat-icon>
                    <span>Hide all</span>
                </span>
            </button>
            <mat-divider class="my-2"></mat-divider>
            <button mat-menu-item>
                <span class="flex items-center">
                    <mat-icon class="icon-size-5 mr-3" [svgIcon]="'heroicons_solid:exclamation'"></mat-icon>
                    <span>Report post</span>
                </span>
            </button>
            <button mat-menu-item>
                <span class="flex items-center">
                    <mat-icon class="icon-size-5 mr-3" [svgIcon]="'heroicons_solid:bell'"></mat-icon>
                    <span>Turn on notifications for this post</span>
                </span>
            </button>
        </mat-menu> -->
    </div>
    <div class="mx-6 sm:mx-8 mt-2 mb-6">
        {{linkedInPost?.message}}
    </div>
    <div class="relative mb-4">
        <img class="h-80 object-cover" src={{linkedInPost?.mediaUrl}} alt="Card cover image">
        <div class="absolute bottom-0 left-0 flex items-center justify-center w-8 h-8 m-4 rounded-full cursor-pointer bg-gray-700"
            [matTooltip]="'Barmouth / UK'" [matTooltipPosition]="'right'">
            <mat-icon class="icon-size-4 text-gray-100" [svgIcon]="'heroicons_solid:location-marker'"></mat-icon>
        </div>
    </div>
    <div class="flex items-center mx-3 sm:mx-5">
        <!-- <button class="px-3 mr-1" *ngIf="isLikedByAuthor" (click)="unlike(linkedInPost?.postId)" mat-button>
            <mat-icon class="icon-size-5 text-red-500">thumb_down_alt</mat-icon>
            <span class="ml-2">Unlike</span>
        </button> -->
        <button mat-button [matMenuTriggerFor]="reactionMenu">Like</button>
        <mat-menu #reactionMenu="matMenu" yPosition="above">
            <button mat-menu-item (click)="createReaction(linkedInPost?.postId,'LIKE')">
                <mat-icon class="icon-size-5 text-red-500">thumb_up_alt</mat-icon>
                <span>Like</span></button>
            <button mat-menu-item (click)="createReaction(linkedInPost?.postId,'PRAISE')">Celebrate</button>
            <button mat-menu-item (click)="createReaction(linkedInPost?.postId,'EMPATHY')">Love</button>
            <button mat-menu-item (click)="createReaction(linkedInPost?.postId,'INTEREST')">Insightful</button>
            <button mat-menu-item (click)="createReaction(linkedInPost?.postId,'APPRECIATION')">Support</button>
            <button mat-menu-item (click)="createReaction(linkedInPost?.postId,'ENTERTAINMENT')">Funny</button>
        </mat-menu>
        <button class="px-3 mr-1" *ngIf="isLikedByAuthor; else like" (click)="deleteReaction(linkedInPost?.postId)" mat-button>
            <mat-icon class="icon-size-5 text-red-500">thumb_down_alt</mat-icon>
            <span class="ml-2">Unlike</span>
        </button>
        <ng-template #like>
            <button class="px-3 mr-1" (click)="createReaction(linkedInPost?.postId,'LIKE')" mat-button>
                <mat-icon class="icon-size-5 text-red-500">thumb_up_alt</mat-icon>
                <span class="ml-2">Like</span>
            </button>
        </ng-template>
        <button class="px-3 mr-1" (click)="loadComments()" mat-button>
            <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:chat-alt'"></mat-icon>
            <span class="ml-2">Comment</span>
        </button>
        <button class="px-3 mr-1" mat-button>
            <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:share'"></mat-icon>
            <span class="ml-2">Share</span>
        </button>
    </div>
    <hr class="border-b mx-6 sm:mx-8 mt-4 mb-6">
    <div class="flex flex-col sm:flex-row sm:items-center mx-6 sm:mx-8 mb-4 sm:mb-6">
        <div class="flex items-center">
            <img class="w-6 h-6 m-0.5 rounded-full text-card ring-2 ring-bg-card"
                src="assets/images/avatars/female-02.jpg" alt="Card cover image">
            <img class="w-6 h-6 m-0.5 rounded-full -ml-3 text-card ring-2 ring-bg-card"
                src="assets/images/avatars/female-04.jpg" alt="Card cover image">
            <img class="w-6 h-6 m-0.5 rounded-full -ml-3 text-card ring-2 ring-bg-card"
                src="assets/images/avatars/male-09.jpg" alt="Card cover image">
            <img class="w-6 h-6 m-0.5 rounded-full -ml-3 text-card ring-2 ring-bg-card"
                src="assets/images/avatars/male-07.jpg" alt="Card cover image">
            <div *ngIf="linkedInPost?.insight?.isLikedByAuthor && linkedInPost?.insight?.totalLikes>1"
                class="text-md tracking-tight ml-3">You and {{linkedInPost?.insight?.totalLikes-1}} more liked this
            </div>
            <div *ngIf="!linkedInPost?.insight?.isLikedByAuthor" class="text-md tracking-tight ml-3">
                {{linkedInPost?.insight?.totalLikes}} liked this</div>
        </div>
        <div class="hidden sm:flex flex-auto"></div>
        <div class="flex items-center mt-4 sm:mt-0">
            <button class="px-3 mr-1 -ml-2 sm:ml-0" mat-button>
                {{linkedInPost?.insight?.shareCount}} shares
            </button>
            <!-- <button class="px-3 sm:-mr-4" mat-button (click)="expandableCard02.expanded = !expandableCard02.expanded"> -->
            <button class="px-3 sm:-mr-4" mat-button (click)="loadComments()">
                <span class="mr-1">{{linkedInPost?.insight?.totalComments}} Comments</span>
                <mat-icon class="icon-size-5 transition-transform ease-in-out duration-150 rotate-0"
                    [ngClass]="{'rotate-180': expandableCard02.expanded}"
                    [svgIcon]="'heroicons_solid:chevron-down'"></mat-icon>
            </button>
        </div>
    </div>

    <ng-container fuseCardExpansion>
        <linkedin-post-comments [commentsList]="commentsList" [linkedInPost]="linkedInPost"></linkedin-post-comments>
    </ng-container>
</fuse-card>